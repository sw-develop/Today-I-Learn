# 2.3 선택 표현과 처리

<br>

# 2.3.5 스마트 캐스트: 타입 검사와 타입 캐스트를 조합

- 자바에서는 어떤 변수의 타입을 instanceof로 확인한 후 그 타입에 속한 멤버에 접근하기 위해 명시적으로 변수 타입을 캐스팅해야 한다. 주로 변수에 따로 캐스팅한 결과를 저장한 후 사용한다.
- **코틀린에서는 is로 타입을 확인한 후 프로그래머 대신 컴파일러가 캐스팅을 해주고, 이를 스마트 캐스트**라고 한다.

```kotlin
if (e is Sum) {
	return eval(e.right) + eval(e.left)
}
```

- 스마트 캐스트의 조건
    - is로 변수에 든 값의 타입을 검사한 후 **그 값이 바뀔 수 없는 경우에만 작동**한다.
    - 클래스의 프로퍼티에 대해 스마트 캐스트를 적용하려면 그 프로퍼티는 반드시 val이어야 하고, 커스텀 접근자를 사용하지 않은 것이어야 한다.
        - 커스텀 접근자를 사용하는 경우에는 해당 프로퍼티에 대한 접근이 항상 같다고 확신할 수 없기 때문이다.