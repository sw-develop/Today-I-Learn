# 개요 😃

<br>

## 📌 탐험 여행의 흐름

![image](https://user-images.githubusercontent.com/69254943/204551751-cd7962a3-dcbb-4b6b-8eef-90d1838417c2.png)

<br>

## 📌 패킷이 거치는 경로

![image](https://user-images.githubusercontent.com/69254943/204551886-791066b5-1262-4d70-8012-3368c2ccccb1.png)

<br>

| 분류                                                            | MAC 주소 (destination) | IP 주소 (destination) | 개요 |
|---------------------------------------------------------------| --- | --- | --- |
| 1) 클라이언트                                                      |  |  |  |
|                                                               |  |  | 맨 처음에 사용자가 URL을 입력함 |
| 웹 브라우저 → Socket 라이브러리                                         |  |  | URL을 웹 브라우저가 해석하여 HTTP 메시지를 만들고, Socket 라이브러리에 건네줌 |
| Socket 라이브러리 → 프로토콜 스택                                        |  |  | Socket 라이브러리는 받은 HTTP 메시지를 송신 데이터로 프로토콜 스택에 건네줌 |
| TCP → IP                                                      |  |  | TCP는 송신 데이터를 패킷의 길이에 맞게 분할하고, TCP 헤더를 부가하여 IP에 건네줌 |
| IP → LAN 드라이버                                                 | 가장 가까운 라우터의 MAC 주소 | 웹 서버의 IP 주소 | IP는 TCP에서 받은 패킷에 IP 헤더를 부가함
 또한 MAC 주소를 조사하여 MAC 헤더도 부가하고 나서 LAN 드라이버에 건네줌                 |
| LAN 드라이버 → LAN 어댑터                                            | 가장 가까운 라우터의 MAC 주소 | 웹 서버의 IP 주소 | LAN 드라이버는 IP에서 송신 패킷을 받고, 이것을 LAN 어댑터에 건네주어 송신하도록 지시함 |
| 2) 클라이언트측 LAN                                                 |  |  |  |
| LAN 어댑터 → 트위스트 페어 케이블                                         |  |  | LAN 어댑터는 이더넷이 송신 가능한 상태가 되는 것을 보아서 패킷을 전기 신호로 변환한 후 트위스트 페어 케이블에 내보냄 |
| 트위스트 페어 케이블 → 리피터 허브                                          |  |  | 신호는 트위스트 페어 케이블 속을 통해 리피터 허브에 도달함 |
| 리피터 허브 → 스위칭 허브                                               |  |  | 리피터 허브가 신호를 모든 포트로 보내면 이것이 스위칭 허브에 도달함 |
| 스위칭 허브 → 라우터                                                  | 가장 가까운 라우터의 MAC 주소 | 웹 서버의 IP 주소 | 스위칭 허브는 도착한 패킷의 수신자 MAC 주소의 값과 자기 속에 있는 주소 테이블을 대조하여 출력할 곳의 포트를 판단하고, 포트에 패킷을 중계함 |
| 라우터                                                           |  | 웹 서버의 IP 주소 | 라우터는 도착한 패킷의 수신자 IP 주소의 값과 저장된 라우팅 테이블의 내용을 대조해 출력 포트를 판단하고, 이 포트에 패킷을 중계함 |
| 라우터 → ADSL 모뎀                                                 | BAS의 MAC 주소 | 웹 서버의 IP 주소 | 라우터가 인터넷에 출력한 패킷에는 PPPoE 헤더와 PPP 헤더가 붙어있음 |
| ADSL 모뎀                                                       |  |  | ADSL 모뎀에 도착한 패킷은 여기에서 ATM 셀로 분할됨 |
| 3) 액세스 회선                                                     |  |  |  |
| ADSL 모뎀 → DSLAM(전화국용 집합 모뎀)                                   |  |  | ADSL 모뎀은 ATM 셀로 분할한 후 전기 신호로 변환하여 전화선에 내보냄
 ADSL 모뎀이 내보낸 신호는 전화선을 통해서 전화국이나 아파트 안에 있는 통신실의 DSLAM에 도착함     |
| DSLAM → BAS(광대역 액세스 서버)                                       |  |  | DSLAM은 수신한 전기 신호를 ATM 셀의 형태로 되돌려 광대역 액세스 서버에 보냄 |
| BAS(광대역 엑세스 서버)                                               |  | 웹 서버의 IP 주소 | BAS는 ATM 셀을 패킷의 형태로 만들고 나서 수신자 주소를 살펴보고 패킷을 중계함 |
| 터널                                                            |  | 웹 서버의 IP 주소 | BAS가 중계한 패킷은 L2TP 헤더가 붙어 터널 안으로 흘러감 |
| 터널링용 라우터 → 프로바이더(인터넷)                                         |  | 웹 서버의 IP 주소 | 터널의 출구에 있는 터널링용 라우터에 패킷이 도착하면, L2TP 헤더와 PPP 헤더가 분리되어 인터넷을 통과하여 웹 서버측으로 흘러감 |
| 4) 웹 서버측 LAN                                                  |  |  |  |
| 프로바이더(인터넷) → 방화벽                                              | 캐시 서버 or 웹 서버의 MAC 주소 | 웹 서버의 IP 주소 | 서버측의 LAN에는 방화벽이 있어 이것을 통해 들어온 패킷을 검사하고, 통과시킬지와 차단할지를 판단함 |
| 방화벽 → 캐시 서버                                                   | 캐기 서버 or 웹 서버의 MAC 주소 | 웹 서버의 IP 주소 | 웹 서버의 바로 앞에 캐시 서버를 설치하는 경우 방화벽을 통과한 패킷을 캐시 서버가 가로챔
 사용자가 요청한 페이지가 캐시 서버에 저장되어 있으면 캐시 서버가 웹 서버를 대신해서 해당 페이지를 되돌려보냄 |
| 5) 웹 서버                                                       |  |  |  |
| 캐시 서버 → LAN 어댑터                                               | 웹 서버의 MAC 주소 | 웹 서버의 IP 주소 | 캐시 서버에 페이지가 저장되어 있지 않으면 여기에서 요구가 전송되어 웹 서버에 도착함 |
| LAN 드라이버 → 프로토콜 스택                                            |  | 웹 서버의 IP 주소 | 웹 서버에 패킷이 도착하면 LAN 어댑터와 LAN 드라이버가 연대하여 패킷을 수신하고, 프로토콜 스택에 건네줌 |
| IP → TCP                                                      |  |  | 프로토콜 스택은 IP 헤더와 TCP 헤더를 차례대로 검사하여 오류가 없으면 패킷에서 HTTP 메시지의 조각을 추출하여 원래의 모습으로 되돌림 |
| TCP → 소켓 라이브러리                                                |  |  | 원래 모습으로 되돌아온 HTTP 메시지는 Socket 라이브러리를 통해 웹 서버(프로세스)에 전달됨 |
| 소켓 라이브러리 → 웹 서버                                               |  |  | 웹 서버(프로세스)는 받은 HTTP 메시지의 내용을 해석해서 요청하는 내용에 따라 데이터를 추출하여 클라이언트에 반송함 |

