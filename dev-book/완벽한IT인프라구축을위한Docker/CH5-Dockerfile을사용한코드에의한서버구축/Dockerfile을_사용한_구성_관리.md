# 5.1 Dockerfile을 사용한 구성 관리

- Docker에서는 인프라의 구성 관리를 Dockerfile에 기술한다.
- Dockerfile에는 베이스가 되는 이미지에 각종 미들웨어를 설치 및 설정하고, 개발한 애플리케이션의 실행 모듈을 전개하기 위한 애플리케이션의 실행 기반의 모든 구성 정보를 기술한다.

<br>

## 📌 Dockerfile이란?

**Docker 명령어를 사용해 Docker 이미지를 작성하려면,**

- 베이스가 되는 Docker 이미지를 바탕으로 Docker 컨테이너를 생성하고, 생성한 Docker 컨테이너 안에서 OS의 설정이나 미들웨어의 설치, 파라미터의 설정 등을 수동으로 수행한다.
- 이후 만들어진 컨테이너에서 서버를 구축한 상태를 바탕으로 Docker 이미지를 생성한다.
- 즉, 이를 위해 다음과 같은 정보를 별도로 남겨둬야 한다.
    - 베이스가 될 Docker 이미지
    - Docker 컨테이너 안에서 수행한 명령
    - 환경변수 등의 설정
    - Docker 컨테이너 안에서 작동시켜둘 데몬 실행

Dockerfile은 이와 같이 Docker 상에서 작동시킬 컨테이너의 구성 정보를 기술하기 위한 파일이다.

docker build 명령은 Dockerfile에 기술된 구성 정보를 바탕으로 Docker 이미지를 작성한다.

<br>

## 📌 Dockerfile의 기본 구문

- Dockerfile은 텍스트 형식의 파일로, 에디터 등을 사용해 작성한다.
- 확장자는 필요 없고, ‘Dockerfile’이라는 이름의 파일에 인프라의 구성 정보를 기술한다.

<br>

## 📌 Dockerfile 작성

- Dockerfile에는 ‘Docker 컨테이너를 어떤 Docker 이미지로부터 생성할지’라는 정보를 반드시 기술해야 한다.
    - 이 이미지를 베이스 이미지라고 함

    ```
    FROM [이미지명]
    FROM [이미지명]:[태그명]
    FROM [이미지명]@[다이제스트]
    ```

    - 태그명을 생략하면 베이스 이미지의 최선 버전이 적용됨
    - 이미지를 고유하게 특정할 때 다이제스트를 이용함
        - 다이제스트는 Docker Hub에 업로드하면 자동으로 부여되는 식별자임