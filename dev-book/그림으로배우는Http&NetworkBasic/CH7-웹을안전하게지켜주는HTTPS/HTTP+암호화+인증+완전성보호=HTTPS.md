# 7.2 HTTP + μ•”νΈν™” + μΈμ¦ + μ™„μ „μ„± λ³΄νΈ = HTTPS

- HTTPSμ— μ¶”κ°€λ κΈ°λ¥μ€
    - ν†µμ‹  μ‹ μ•”νΈν™”, ν†µμ‹  μƒλ€ μΈμ¦, λ°μ΄ν„° μ™„μ „μ„± λ³΄νΈμ΄λ‹¤.

<br>

## π“Β HTTPμ— μ•”νΈν™”μ™€ μΈμ¦κ³Ό μ™„μ „μ„± λ³΄νΈλ¥Ό λ”ν• HTTPS

- κΈ°μ΅΄ HTTPμ λ¬Έμ μ μ„ λ‹¤μ‹ μƒκΈ°μ‹ν‚¤μλ©΄,
    - HTTP ν†µμ‹ μ€ μ•”νΈν™”λμ§€ μ•μ€ ν‰λ¬ΈμΌλ΅ μ‹¤μ‹λλ‹¤.
        - μμ‹
            - μ›Ή νμ΄μ§€μ—μ„ μ‹ μ© μΉ΄λ“ λ²νΈλ¥Ό μ…λ ¥ν–μ„ λ• ν†µμ‹ μ΄ λ„μ²­λλ©΄ μ‹ μ© μΉ΄λ“ λ²νΈλ¥Ό λ„μ²­λ‹Ήν•κ² λ¨
    - HTTPμ—λ” ν†µμ‹  μƒλ€μΈ μ„λ²„λ‚ ν΄λΌμ΄μ–ΈνΈλ¥Ό μΈμ¦ν•λ” μλ‹¨μ΄ μ—†λ‹¤.
    - μμ‹ ν• λ©”μ‹μ§€κ°€ λ„μ¤‘μ— λ³€μ΅°λμ—μ„ κ°€λ¥μ„±μ΄ μλ‹¤.
- μ΄λ¬ν• λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄μ„λ” μ•”νΈν™”, μΈμ¦, μ™„μ „μ„± λ³΄νΈ κ°™μ€ κµ¬μ΅°λ¥Ό HTTPμ— μ¶”κ°€ν•  ν•„μ”κ°€ μλ‹¤. β‡’ μ΄κ²ƒμ„ HTTPS(HTTP Secure)λΌκ³  λ¶€λ¦„

<br>

## π“Β HTTPSλ” SSLμ κ»μ§μ„ λ®μ–΄μ“΄ HTTP

- HTTPSλ” μƒλ΅μ΄ μ• ν”λ¦¬μΌ€μ΄μ… κ³„μΈµμ ν”„λ΅ν† μ½μ΄ μ•„λ‹λ‹¤. HTTP ν†µμ‹ μ„ ν•λ” μ†μΌ“ λ¶€λ¶„μ„ SSLμ΄λ‚ TLS ν”„λ΅ν† μ½λ΅ λ€μ²΄ν•κ³  μμ„ λΏμ΄λ‹¤.

![image](https://user-images.githubusercontent.com/69254943/203213588-24f214d1-2d2e-4e40-a98f-cdd5c7567d42.png)

- λ³΄ν†µ HTTPλ” μ§μ ‘ TCPμ™€ ν†µμ‹ ν•μ§€λ§ SSLμ„ μ‚¬μ©ν• κ²½μ°μ—λ” HTTPλ” SSLκ³Ό ν†µμ‹ ν•κ³ , SSLμ΄ TCPμ™€ ν†µμ‹ ν•κ² λλ‹¤.
- SSLμ„ μ‚¬μ©ν•¨μΌλ΅μ¨ HTTPλ” HTTPλ΅μ„ μ•”νΈν™”, μ¦λ…μ„, μ™„μ „μ„± λ³΄νΈλ¥Ό μ΄μ©ν•  μ μκ² λλ‹¤.
- SSLμ€ HTTPμ™€λ” λ…λ¦½λ ν”„λ΅ν† μ½λ΅ μ• ν”λ¦¬μΌ€μ΄μ… κ³„μΈµμ—μ„ λ™μ‘ν•λ” SMTPλ‚ Telnet λ“±μ—μ„λ„ μ΄μ©λ  μ μλ‹¤.
    - λ„λ¦¬ μ‚¬μ©λκ³  μλ” λ„¤νΈμ›ν¬ λ³΄μ• κΈ°μ μ„

<br>

## π“Β μƒνΈκ°„μ— ν‚¤λ¥Ό κµν™ν•λ” κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹

- SSLμ—μ„λ” κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹μ„ μ‚¬μ©ν•λ‹¤.

β–¶οΈΒ **κ³µν†µν‚¤ μ•”νΈμ λ”λ λ§**

- μ•”λ³µνΈν™”μ— λ™μΌν• ν‚¤λ¥Ό μ‚¬μ©ν•λ” λ°©μ‹μ„ κ³µν†µν‚¤ μ•”νΈλΌκ³  λ¶€λ¥Έλ‹¤.
- κ³µν†µν‚¤ μ•”νΈν™” λ°©μ‹μ€ μƒλ€λ°©μ—κ² ν‚¤λ¥Ό λ„κ²¨μ¤μ•Ό ν•λ”λ°, λ„¤νΈμ›ν¬λ¥Ό μ‚¬μ©ν•΄ ν‚¤λ¥Ό λ„κ²¨μ¤„ λ• ν†µμ‹ μ΄ λ„μ²­λμ–΄ ν‚¤κ°€ λ…Έμ¶λ  μ μλ‹¤.
- λν•, λ°›μ€ ν‚¤λ¥Ό μ•μ „ν•κ² λ³΄κ΄€ν•΄μ•Ό ν•λ‹¤.

β–¶οΈΒ **λ‘ κ°μ ν‚¤λ¥Ό μ‚¬μ©ν•λ” κ³µκ°ν‚¤ μ•”νΈ**

- μ„μ™€ κ°™μ€ κ³µν†µν‚¤ μ•”νΈμ— μ‚¬μ©λ  ν‚¤ μ „λ‹¬ μ‹ λ„μ²­ λ¬Έμ λ¥Ό ν•΄κ²°ν•λ ¤κ³  ν• κ²ƒμ΄ κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹μ΄λ‹¤.
- κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹μ€
    - (λΉ„λ°€ν‚¤, κ³µκ°ν‚¤) ν‚¤ νμ–΄λ¥Ό μ‚¬μ©ν•λ‹¤.

  ![image](https://user-images.githubusercontent.com/69254943/203213611-a67b4f17-c1c9-4e45-972b-27b5bd6c209e.png)

    - λ³µνΈν™”λ¥Ό μ„ν• λΉ„λ°€ν‚¤λ¥Ό ν†µμ‹ μΌλ΅ λ³΄λ‚Ό ν•„μ”κ°€ μ—†κΈ° λ•λ¬Έμ— λ„μ²­μ— μν•΄ ν‚¤λ¥Ό λΉΌμ•—κΈΈ κ°€λ¥μ„±μ΄ μ—†λ‹¤.


β–¶οΈΒ **HTTPSλ” ν•μ΄λΈλ¦¬λ“ μ•”νΈν™” μ‹μ¤ν…**

- ν‚¤λ¥Ό μ•μ „ν•κ² κµν™ν•  μλ§ μλ‹¤λ©΄, κ³µκ°ν‚¤ μ•”νΈλ§μ„ μ‚¬μ©ν•λ©΄ λμ§€ μ•μ„κΉ?
    - κ³µκ°ν‚¤ μ•”νΈλ” κ³µν†µν‚¤ μ•”νΈμ— λΉ„ν•΄ μ²λ¦¬ μ†λ„κ°€ λ¦λ”λ‹¤.
    - κ³µκ°ν‚¤ μ•”νΈμ™€ κ³µν†µν‚¤ μ•”νΈ κ°κ°μ μ¥μ μ„ μ‚΄λ¦΄ μ μλ„λ΅ 2κ°€μ§€ λ°©μ‹μ„ μ΅°ν•©ν•΄μ„ ν†µμ‹ ν•λ‹¤.
- HTTPSλ”
    - κ³µν†µν‚¤ μ•”νΈν™”μ— μ‚¬μ©ν•  ν‚¤λ¥Ό κµν™ν•  λ•λ” κ³µκ°ν‚¤ μ•”νΈλ¥Ό μ‚¬μ©ν•κ³ ,
    - κ·Έ ν›„μ ν†µμ‹ μ—μ„ λ©”μ‹μ§€λ¥Ό κµν™ν•  λ•λ” κ³µν†µν‚¤ μ•”νΈλ¥Ό μ‚¬μ©ν•λ‹¤.

<br>

## π“Β **κ³µκ°ν‚¤κ°€ μ •ν™•ν•μ§€ μ•„λ‹μ§€λ¥Ό μ¦λ…ν•λ” μ¦λ…μ„ β‡’ μ¬λ°”λ¥Έ ν†µμ‹  μƒλ€μ„μ„ μ¦λ…**

- κ³µκ°ν‚¤ μ•”νΈμ—λ„ λ¬Έμ μ μ΄ μ΅΄μ¬ν•λ‹¤. κ³µκ°ν‚¤κ°€ ν†µμ‹ ν•κ³ μ ν•λ” μƒλ€μ κ²ƒμ΄ λ§λ”μ§€ μ¦λ…ν•  ν•„μ”κ°€ μλ‹¤.
- μ΄ λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ μΈμ¦ κΈ°κ΄€(CA: Certificate Authority)κ³Ό κ·Έ κΈ°κ΄€μ΄ λ°ν–‰ν•λ” κ³µκ°ν‚¤ μ¦λ…μ„κ°€ μ΄μ©λλ‹¤.
    - μΈμ¦ κΈ°κ΄€ : ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ λ¨λ‘ μ‹ λΆ°ν•λ” μ 3μ κΈ°κ΄€
- κ³Όμ •

  ![image](https://user-images.githubusercontent.com/69254943/203213636-4fcc7ad1-2f99-4dda-a76e-45393b980545.png)

    - μΈμ¦κΈ°κ΄€μ κ³µκ°ν‚¤λ” μ•μ „ν•κ² ν΄λΌμ΄μ–ΈνΈμ—κ² μ „λ‹¬λμ–΄μ•Ό ν•λ”λ°, ν†µμ‹ μ¤‘μ—λ” μ–΄λ–¤ λ°©λ²•μ„ μ‚¬μ©ν•λ”λΌλ„ μ•μ „ν•κ² μ „λ‹¬ν•λ” κ²ƒμ€ μ–΄λ ¤μ›€
    - λ§μ€ λΈλΌμ°μ €κ°€ μ£Όμ” μΈμ¦κΈ°κ΄€μ κ³µκ°ν‚¤λ¥Ό μ‚¬μ „μ— λ‚΄μ¥ν•κ³  μμ

<br>

## π“Β μ•μ „ν• ν†µμ‹ μ„ ν•λ” HTTPSμ κµ¬μ΅°

![image](https://user-images.githubusercontent.com/69254943/203213663-2eb5c72b-0a70-4491-90e9-49940ce5726c.png)

1) ν΄λΌμ΄μ–ΈνΈκ°€ Client Hello λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄λ©΄μ„ SSL ν†µμ‹ μ„ μ‹μ‘ν•λ‹¤.

- λ©”μ‹μ§€μ— ν΄λΌμ΄μ–ΈνΈκ°€ μ κ³µν•λ” SSLμ λ²„μ „μ„ μ§€μ •ν•κ³ ,
- Cipher Suiteλ΅ λ¶λ¦¬λ” λ¦¬μ¤νΈ(μ‚¬μ©ν•λ” μ•”νΈν™”μ μ•κ³ λ¦¬μ¦μ΄λ‚ ν‚¤ μ‚¬μ΄μ¦ λ“±) λ“±μ΄ ν¬ν•¨λμ–΄ μμ

2) μ„λ²„κ°€ SSL ν†µμ‹ μ΄ κ°€λ¥ν• κ²½μ°μ—λ” Server Hello λ©”μ‹μ§€λ΅ μ‘λ‹µν•λ‹¤.

- SSL λ²„μ „κ³Ό Cipher Suiteλ¥Ό ν¬ν•¨ν•¨
- μ„λ²„μ Cipher Suite λ‚΄μ©μ€ ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ°›μ€ Cipher Suite λ‚΄μ©μ—μ„ μ„ νƒλ κ²ƒμ„

3) μ„λ²„κ°€ Certificate λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•λ‹¤.

- λ©”μ‹μ§€μ—λ” κ³µκ°ν‚¤ μ¦λ…μ„κ°€ ν¬ν•¨λμ–΄ μμ

4) μ„λ²„κ°€ Server Hello Done λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄ μµμ΄μ SSL negotiation λ¶€λ¶„μ΄ λλ‚¬μμ„ ν†µμ§€ν•λ‹¤.

5) SSLμ μµμ΄ negotiationdl μΆ…λ£λλ©΄, ν΄λΌμ΄μ–ΈνΈκ°€ Client Key Exchange λ©”μ‹μ§€λ΅ μ‘λ‹µν•λ‹¤.

- λ©”μ‹μ§€μ—λ” ν†µμ‹ μ„ μ•”νΈν™”ν•λ”λ° μ‚¬μ©ν•λ” Pre-Master secretμ΄ ν¬ν•¨λμ–΄ μμ (λ€μΉ­ν‚¤ μ•”νΈν™” ν†µμ‹ μ„ μ„ν•)
- μ΄ λ©”μ‹μ§€λ” 3)μ κ³µκ°ν‚¤ μ¦λ…μ„μ—μ„ κΊΌλ‚Έ Serverμ κ³µκ°ν‚¤λ΅ μ•”νΈν™”λμ–΄ μμ

6) ν΄λΌμ΄μ–ΈνΈκ°€ Change Cipher Spec λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•λ‹¤.

- μ΄ λ©”μ‹μ§€ μ΄ν›„μ ν†µμ‹ μ€ μ•”νΈν‚¤λ¥Ό μ‚¬μ©ν•΄ μ§„ν–‰ν•λ‹¤λ” κ²ƒμ„ λ‚νƒ€λƒ„ β‡’ μ΄μ  λ€μΉ­ν‚¤ μ•”νΈν™” ν†µμ‹ μ„ ν•κ² λ‹¤!

7) ν΄λΌμ΄μ–ΈνΈκ°€ Finished λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•λ‹¤.

- μ΄ λ©”μ‹μ§€λ” μ ‘μ† μ „μ²΄μ μ²΄ν¬ κ°’μ„ ν¬ν•¨ν•κ³  μμ
- negotiation μ„±κ³µ μ—¬λ¶€λ” μ„λ²„κ°€ μ΄ λ©”μ‹μ§€λ¥Ό λ€μΉ­ν‚¤λ¥Ό κ°€μ§€κ³  μ¬λ°”λ¥΄κ² λ³µνΈν™”ν•  μ μλ”μ§€μ— λ”°λΌ κ²°μ •λ¨

8) μ„λ²„μ—μ„λ„ λ§μ°¬κ°€μ§€λ΅ Change Cipher Spec λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•λ‹¤. β‡’ μ΄μ  λ€μΉ­ν‚¤ μ•”νΈν™” ν†µμ‹ μ„ ν•κ² λ‹¤!

9) Finished λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•λ‹¤.

10) μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈμ Finished λ©”μ‹μ§€ κµν™μ΄ μ™„λ£λλ©΄ SSLμ— μν•΄μ„ μ ‘μ†μ€ ν™•λ¦½λλ‹¤.

- ν†µμ‹ μ€ SSLμ— μν•΄ λ³΄νΈλ¨ β‡’ λ°μ΄ν„° κµν™ μ‹ λ€μΉ­ν‚¤ μ•”νΈν™” μ‚¬μ©λ¨
- μ΄μ λ¶€ν„° μ• ν”λ¦¬μΌ€μ΄μ… κ³„μΈµμ ν”„λ΅ν† μ½μ— μν•΄ ν†µμ‹ μ„ ν•¨ β‡’ μ¦‰, HTTP μ”μ²­μ„ λ³΄λƒ„

11) μ• ν”λ¦¬μΌ€μ΄μ… κ³„μΈµμ ν”„λ΅ν† μ½μ— μν•΄ ν†µμ‹ μ„ ν•¨ β‡’ μ¦‰, HTTP μ‘λ‹µμ„ λ³΄λƒ„

12) λ§μ§€λ§‰μ— ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†μ„ λλ”λ‹¤.

- μ ‘μ†μ„ λμ„ κ²½μ° close_notify λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•¨
- μ΄ν›„ TCP μ—°κ²°μ„ μΆ…λ£ν•¨ β‡’ μ£Όμν•  κ²ƒμ€ TCP Layerμ™€ SSL Layerλ” λ¶„λ¦¬λμ–΄ μκΈ° λ•λ¬Έμ— κ°κ°μ ν†µμ‹  κµ¬μ΅°λ§ μƒκ°ν•λ©΄ λ¨, λ‹¨μ§€ SSL ν†µμ‹ μ΄ λλ‚λ©΄ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°„ ν†µμ‹ μ΄ λ”μ΄μƒ μ΄λ£¨μ–΄μ§€μ§€ μ•λ” κ²ƒμ΄λ―€λ΅, TCP μ—°κ²°λ„ μΆ…λ£λμ–΄μ•Ό ν•λ” κ²ƒμ„

<br>

**β–¶οΈΒ μ¶”κ°€μ μΌλ΅**

- μ• ν”λ¦¬μΌ€μ΄μ… κ³„μΈµμ λ°μ΄ν„° μ†΅μ‹ ν•  λ•(HTTP μ”μ²­, μ‘λ‹µ λ³΄λ‚Ό λ•) MAC(Message Authentication Code)μ΄λΌκ³  λ¶€λ¥΄λ” λ©”μ‹μ§€ λ‹¤μ΄μ μ¤νΈλ¥Ό λ§λ¶™μΌ μ μλ‹¤.
- μ΄λ¥Ό ν†µν•΄ λ°μ΄ν„°μ λ³€μ΅°λ¥Ό κ°μ§€ν•΄ μ™„μ „μ„± λ³΄νΈλ¥Ό μ‹¤ν„ν•λ‹¤.

![image](https://user-images.githubusercontent.com/69254943/203213687-ca985419-9d46-4924-bd8a-66402d926f00.png)

**β–¶οΈΒ SSLκ³Ό TLS**

- HTTPSμ—μ„λ” SSL(Secure Socket Layer)κ³Ό TLS(Transport Layer Security)λΌλ” 2κ°μ ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•λ‹¤.
- TLSλ” SSLμ„ λ°”νƒ•μΌλ΅ ν• ν”„λ΅ν† μ½μ΄μ§€λ§, μ΄ ν”„λ΅ν† μ½μ„ μ΄μΉ­ν•΄μ„ SSLμ΄λΌκ³  λ¶€λ¥΄κΈ°λ„ ν•λ‹¤.
- ν„μ¬λ” SSL3.0, TLS1.0μ΄ μ£Όλ¥μ΄λ‹¤.

**β–¶οΈΒ SSLμ€ λλ¦¬λ‹¤?**

- SSL ν†µμ‹ μ΄ μ§€μ—°λλ” μ΄μ λ” 2κ°€μ§€κ°€ μλ‹¤.

    1) ν†µμ‹  μ†λ„κ°€ λ–¨μ–΄μ§€λ” κ²ƒ

    - TCP μ ‘μ†κ³Ό HTTPμ μ”μ²­, μ‘λ‹µ μ΄μ™Έμ— SSLμ— ν•„μ”ν• ν†µμ‹ μ΄ μ¶”κ°€λ¨

    2) CPUλ‚ λ©”λ¨λ¦¬ λ“±μ λ¦¬μ†μ¤λ¥Ό λ‹¤λ‰μΌλ΅ μ†λΉ„ν•μ—¬ μ²λ¦¬κ°€ λλ ¤μ§€λ” κ²ƒ

    - SSLμ€ λ°λ“μ‹ μ•”νΈν™” μ²λ¦¬λ¥Ό ν•λ―€λ΅, μ•”λ³µνΈν™”λ¥Ό μ„ν• κ³„μ‚° ν•„μ”ν•¨

- κ°μ„ ν•λ ¤λ©΄?
    - SSL μ—‘μ…€λ μ΄ν„°λΌλ” ν•λ“μ›¨μ–΄λ¥Ό μ‚¬μ©ν•΄ κ°μ„  κ°€λ¥ν•λ‹¤.
        - SSLμ„ μ²λ¦¬ν•κΈ° μ„ν• μ „μ© ν•λ“μ›¨μ–΄λ΅ μ†ν”„νΈμ›¨μ–΄λ΅ SSLμ„ μ²λ¦¬ν•  λ•λ³΄λ‹¤ λ” λΉ λ¥Έ κ³„μ‚° κ°€λ¥ν•¨
        - SSLμ μ²λ¦¬λ§ SSL μ—‘μ…€λ μ΄ν„°μ— λ§΅κ²¨ λ¶€ν•λ¥Ό λ¶„μ‚°μ‹ν‚΄